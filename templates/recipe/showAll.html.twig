{% extends 'base.html.twig' %}

{% block body %}

    <div class="max-w-7xl mx-auto p-4 sm:px-6 lg:px-8 space-y-8">

        {# Conditional Title for Search Results #}
        {% if search_phrase is defined and search_phrase is not empty %}
            <h1 class="text-3xl font-extrabold text-[#1a1a1a] border-b-2 border-gray-100 pb-2">
                Search Results for: <span class="text-[#9b59b6]">{{ search_phrase }}</span>
            </h1>
            <p class="text-gray-600">
                Found {{ recipes|length }} result{% if recipes|length != 1 %}s{% endif %}.
            </p>
        {% else %}
            <h1 class="text-3xl font-extrabold text-[#1a1a1a] border-b-2 border-gray-100 pb-2">
                All Recipes
            </h1>
        {% endif %}

        {# Recipe Grid #}
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">

            {% for recipe in recipes %}
                {# Use the reusable card component #}
                {% include 'main/_recipe_card.html.twig' with {
                    id: recipe.id,
                    title: recipe.title,
                    prep: recipe.prepTime,
                    cook: recipe.cookTime,
                    route: 'show_recipe',
                    image_url: recipe.image
                } %}
            {% endfor %}

        </div>

        {# No Results Found Message #}
        {% if recipes|length == 0 %}
            <div class="p-8 text-center bg-white rounded-xl shadow-lg mt-12">
                <h3 class="text-xl font-semibold text-gray-700">No recipes found.</h3>
                <p class="text-gray-500 mt-2">Try searching for a different ingredient or dish name.</p>
            </div>
        {% endif %}

    </div>

{% endblock %}

{% block title %}
    {% if search_phrase is defined and search_phrase is not empty %}
        Search Results
    {% else %}
        All Recipes
    {% endif %}
{% endblock %}
